<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Dashboard - Quizlet</title>
    <!-- Bootstrap CSS -->
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/css/bootstrap.min.css" rel="stylesheet">
    <!-- Bootstrap Icons -->
    <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bootstrap-icons@1.11.0/font/bootstrap-icons.css">
    <!-- Dashboard CSS -->
    <link rel="stylesheet" href="../../../style/dashboard.css">
</head>

<body class="dashboard-body">
    <!-- Top Header Bar -->
    <header class="dashboard-header">
        <div class="header-left">
            <button class="menu-toggle-btn">
                <i class="bi bi-list"></i>
            </button>
            <div class="logo">
                <span class="logo-q">Q</span>
            </div>
        </div>
        <div class="header-center">
            <div class="search-container">
                <i class="bi bi-search"></i>
                <input type="text" class="search-input" placeholder="Find it faster with a search"
                    data-i18n-placeholder="searchPlaceholder">
            </div>
        </div>
        <div class="header-right">
            <div class="create-dropdown-wrapper">
                <button class="btn-create" type="button" id="createDropdownBtn" data-bs-toggle="dropdown"
                    aria-expanded="false">
                    <i class="bi bi-plus-lg"></i>
                </button>
                <ul class="create-dropdown-menu dropdown-menu" aria-labelledby="createDropdownBtn">
                    <li>
                        <a class="create-dropdown-item dropdown-item" href="flashcards.html">
                            <i class="bi bi-card-text"></i>
                            <span>Flashcard set</span>
                        </a>
                    </li>
                    <li>
                        <a class="create-dropdown-item dropdown-item" href="#"
                            onclick="showNewFolderModal(event); return false;">
                            <i class="bi bi-folder"></i>
                            <span>Folder</span>
                        </a>
                    </li>
                </ul>
            </div>
            <div class="profile-icon-wrapper">
                <div class="profile-icon" id="profileIcon">
                    <img src="../../../assets/website/image/111.f9dd73353feb908.jpg" alt="Profile" class="profile-img">
                </div>
                <!-- Profile Dropdown Menu -->
                <div class="profile-dropdown" id="profileDropdown">
                    <div class="dropdown-user-info">
                        <img src="../../../assets/website/image/111.f9dd73353feb908.jpg" alt="Profile"
                            class="dropdown-avatar">
                        <div class="dropdown-user-details">
                            <div class="dropdown-username">M_Hamza80</div>
                            <div class="dropdown-email">hamzahafiz306@gmail.com</div>
                        </div>
                    </div>
                    <div class="dropdown-divider"></div>
                    <div class="dropdown-menu-items">
                        <a href="achievements.html" class="dropdown-item active">
                            <i class="bi bi-trophy"></i>
                            <span data-i18n="achievements">Achievements</span>
                        </a>
                        <a href="settings.html" class="dropdown-item">
                            <i class="bi bi-gear"></i>
                            <span data-i18n="settings">Settings</span>
                        </a>
                        <a href="#" class="dropdown-item">
                            <i class="bi bi-sun"></i>
                            <span data-i18n="lightMode">Light mode</span>
                        </a>
                    </div>
                    <div class="dropdown-divider"></div>
                    <div class="dropdown-menu-items">
                        <a href="#" class="dropdown-item no-icon" data-i18n="logOut">Log out</a>
                    </div>
                </div>
            </div>
        </div>
    </header>

    <div class="dashboard-container">
        <!-- Left Sidebar -->
        <aside class="dashboard-sidebar">
            <nav class="sidebar-nav">
                <a href="#" class="nav-item active" id="homeNavItem" onclick="showHomePage(event)">
                    <i class="bi bi-house-door"></i>
                    <span data-i18n="home">Home</span>
                </a>
                <a href="library.html" class="nav-item">
                    <i class="bi bi-folder"></i>
                    <span data-i18n="yourLibrary">Your library</span>
                </a>
                <a href="notifications.html" class="nav-item">
                    <i class="bi bi-bell"></i>
                    <span data-i18n="notifications">Notifications</span>
                </a>
                <a href="#" class="nav-item" id="favoritesNavItem" onclick="showFavoritesPage(event)">
                    <i class="bi bi-star"></i>
                    <span>Favorites</span>
                </a>
                <hr class="sidebar-divider">
                <div class="nav-section-title" data-i18n="yourFolders">Your folders</div>
                <div id="foldersList">
                    <!-- Folders will be loaded here -->
                </div>
                <a href="#" class="nav-item" onclick="showNewFolderModal(event)">
                    <i class="bi bi-plus-circle"></i>
                    <span data-i18n="newFolder">New folder</span>
                </a>
                <hr class="sidebar-divider">
                <div class="nav-section-title" data-i18n="startHere">Start here</div>
                <a href="flashcards.html" class="nav-item">
                    <i class="bi bi-card-text"></i>
                    <span data-i18n="flashcards">Flashcards</span>
                </a>
                <a href="expert-solutions.html" class="nav-item">
                    <i class="bi bi-book"></i>
                    <span data-i18n="expertSolutions">Expert Solutions</span>
                </a>
            </nav>
        </aside>

        <!-- Main Content -->
        <main class="dashboard-main">
            <!-- Favorites Section -->
            <section class="favorites-section" id="favoritesSection" style="display: none;">
                <h2 class="section-title">Your Favorites</h2>
                <div class="favorites-list" id="favoritesList">
                    <!-- Favorites will be loaded here -->
                </div>
            </section>

            <!-- Jump back in Section -->
            <section class="jump-back-section">
                <h2 class="section-title" data-i18n="jumpBackIn">Jump back in</h2>
                <div class="jump-back-slider-wrapper">
                    <div class="jump-back-cards" id="jumpBackCards">
                        <!-- Cards will be dynamically loaded here -->
                    </div>
                </div>
                <div class="jump-back-pagination" id="jumpBackPagination">
                    <!-- Pagination dots will be dynamically loaded here -->
                </div>
            </section>

            <!-- Recents Section -->
            <section class="recents-section">
                <h2 class="section-title" data-i18n="recents">Recents</h2>
                <div class="recents-list">
                    <a href="flashcard-view.html" class="recent-item">
                        <i class="bi bi-card-text recent-icon"></i>
                        <div class="recent-content">
                            <div class="recent-title">World flags</div>
                            <div class="recent-meta">59 cards • by Quizlet</div>
                        </div>
                    </a>
                    <a href="flashcard-view.html" class="recent-item">
                        <i class="bi bi-card-text recent-icon"></i>
                        <div class="recent-content">
                            <div class="recent-title">Communication & Language Vocabulary, 1. Readi...</div>
                            <div class="recent-meta">100 cards • by quizlette77757375</div>
                        </div>
                    </a>
                    <a href="flashcard-view.html" class="recent-item">
                        <i class="bi bi-card-text recent-icon"></i>
                        <div class="recent-content">
                            <div class="recent-title">hjhj</div>
                            <div class="recent-meta">2 cards • by you</div>
                        </div>
                    </a>
                </div>
            </section>

            <!-- Game Section -->
            <section class="game-section">
                <h2 class="section-title">Switch it up with a game</h2>
                <div class="game-card">
                    <button class="card-menu-btn">
                        <i class="bi bi-three-dots-vertical"></i>
                    </button>
                    <div class="game-icon">
                        <div class="icon-grid">
                            <div class="grid-square blue"></div>
                            <div class="grid-square white"></div>
                            <div class="grid-square blue"></div>
                            <div class="grid-square white"></div>
                            <div class="grid-square blue"></div>
                            <div class="grid-square white"></div>
                            <div class="grid-square blue"></div>
                            <div class="grid-square white"></div>
                            <div class="grid-square blue"></div>
                        </div>
                    </div>
                    <div class="card-content">
                        <h3 class="card-title">Communication & Language Vocabulary, 1. Reading: Craft and Structure, SAT
                            Reading and Writing</h3>
                        <p class="card-subtitle">Get more moves by answering correctly</p>
                        <button class="btn-play-blocks" onclick="window.location.href='blocks.html'">Play
                            Blocks</button>
                    </div>
                    <div class="game-blocks">
                        <img src="../../../assets/admin/images/blocks_new.png" alt="Game Blocks" class="blocks-image">
                    </div>
                </div>
            </section>

            <!-- Staff Picks Section -->
            <section class="staff-picks-section">
                <div class="staff-picks-header">
                    <div class="staff-picks-title-group">
                        <span class="staff-picks-label">Staff picks</span>
                        <h2 class="staff-picks-title">Try out these flashcard sets</h2>
                    </div>
                    <button class="section-options-btn">
                        <i class="bi bi-three-dots-vertical"></i>
                    </button>
                </div>
                <div class="staff-picks-container">
                    <div class="staff-picks-scroll">
                        <a href="flashcard-view.html?title=Quizlet basics" class="staff-pick-card-link">
                            <div class="staff-pick-card">
                                <i class="bi bi-card-text staff-pick-icon"></i>
                                <div class="staff-pick-content">
                                    <h3 class="staff-pick-title">Quizlet basics</h3>
                                    <div class="staff-pick-meta">11 cards • by Quizlet</div>
                                </div>
                                <button class="card-options-btn"
                                    onclick="event.preventDefault(); event.stopPropagation();">
                                    <i class="bi bi-three-dots-vertical"></i>
                                </button>
                            </div>
                        </a>
                        <a href="flashcard-view.html?title=Common Quizlet questions" class="staff-pick-card-link">
                            <div class="staff-pick-card">
                                <i class="bi bi-card-text staff-pick-icon"></i>
                                <div class="staff-pick-content">
                                    <h3 class="staff-pick-title">Common Quizlet questions</h3>
                                    <div class="staff-pick-meta">15 cards • by Quizlet</div>
                                </div>
                                <button class="card-options-btn"
                                    onclick="event.preventDefault(); event.stopPropagation();">
                                    <i class="bi bi-three-dots-vertical"></i>
                                </button>
                            </div>
                        </a>
                        <a href="flashcard-view.html?title=Effective study strategies" class="staff-pick-card-link">
                            <div class="staff-pick-card">
                                <i class="bi bi-card-text staff-pick-icon"></i>
                                <div class="staff-pick-content">
                                    <h3 class="staff-pick-title">Effective study strategies</h3>
                                    <div class="staff-pick-meta">12 cards • by Quizlet</div>
                                </div>
                                <button class="card-options-btn"
                                    onclick="event.preventDefault(); event.stopPropagation();">
                                    <i class="bi bi-three-dots-vertical"></i>
                                </button>
                            </div>
                        </a>
                        <a href="flashcard-view.html?title=Study tips and tricks" class="staff-pick-card-link">
                            <div class="staff-pick-card">
                                <i class="bi bi-card-text staff-pick-icon"></i>
                                <div class="staff-pick-content">
                                    <h3 class="staff-pick-title">Study tips and tricks</h3>
                                    <div class="staff-pick-meta">18 cards • by Quizlet</div>
                                </div>
                                <button class="card-options-btn"
                                    onclick="event.preventDefault(); event.stopPropagation();">
                                    <i class="bi bi-three-dots-vertical"></i>
                                </button>
                            </div>
                        </a>
                    </div>
                    <button class="staff-picks-next-btn">
                        <i class="bi bi-chevron-right"></i>
                    </button>
                </div>
            </section>

            <!-- Blast Game Section -->
            <section class="game-section">
                <h2 class="section-title">Switch it up with a game</h2>
                <div class="game-card">
                    <button class="card-menu-btn">
                        <i class="bi bi-three-dots-vertical"></i>
                    </button>
                    <div class="game-icon">
                        <i class="bi bi-rocket-takeoff" style="font-size: 1.5rem; color: #60a5fa;"></i>
                    </div>
                    <div class="card-content">
                        <h3 class="card-title">Hello In different languages</h3>
                        <p class="card-subtitle">Blast correct answers before time's up</p>
                        <button class="btn-play-blocks" onclick="window.location.href='blast.html'">Play Blast</button>
                    </div>
                    <div class="game-blocks">
                        <img src="../../../assets/admin/images/blast_new.png" alt="Blast Game" class="blocks-image">
                    </div>
                </div>
            </section>

            <!-- Personalize Content Section -->
            <section class="personalize-section">
                <h2 class="section-title">Personalize your content</h2>
                <div class="personalize-card">
                    <button class="card-menu-btn">
                        <i class="bi bi-three-dots-vertical"></i>
                    </button>
                    <div class="personalize-content">
                        <div class="personalize-icon">
                            <span class="logo-q-large">Q</span>
                        </div>
                        <div class="personalize-text">
                            <p class="personalize-placeholder">Add your exams to get recommended content</p>
                            <button class="btn-add-exams" onclick="showExamSelectionModal()">Add standardized
                                exams</button>
                        </div>
                    </div>
                </div>
            </section>
        </main>
    </div>

    <!-- Footer -->
    <footer class="dashboard-footer">
        <div class="footer-links">
            <a href="#" class="footer-link">Privacy</a>
            <a href="#" class="footer-link">Terms</a>
        </div>
        <div class="footer-language">
            <div class="dropdown">
                <button class="btn btn-outline-secondary dropdown-toggle language-btn" type="button"
                    id="footerLanguageDropdown" data-bs-toggle="dropdown" aria-expanded="false">
                    English (USA)
                </button>
                <ul class="dropdown-menu" aria-labelledby="footerLanguageDropdown">
                    <li><a class="dropdown-item" href="#">English (UK)</a></li>
                    <li><a class="dropdown-item" href="#">Español</a></li>
                    <li><a class="dropdown-item" href="#">Français</a></li>
                </ul>
            </div>
        </div>
    </footer>

    <!-- Exam Selection Modal -->
    <div class="exam-selection-modal" id="examSelectionModal" style="display: none;">
        <div class="exam-selection-modal-overlay" onclick="hideExamSelectionModal()"></div>
        <div class="exam-selection-modal-content">
            <div class="exam-selection-header">
                <div class="exam-selection-icon">
                    <svg width="48" height="48" viewBox="0 0 48 48" fill="none" xmlns="http://www.w3.org/2000/svg">
                        <rect x="8" y="6" width="32" height="40" rx="4" fill="#A855F7" />
                        <rect x="12" y="12" width="24" height="4" rx="2" fill="white" />
                        <rect x="12" y="20" width="20" height="4" rx="2" fill="white" />
                        <rect x="12" y="28" width="16" height="4" rx="2" fill="white" />
                        <circle cx="36" cy="18" r="6" fill="#FBBF24" />
                        <path d="M33 18 L35 20 L39 16" stroke="white" stroke-width="2" stroke-linecap="round"
                            stroke-linejoin="round" fill="none" />
                    </svg>
                </div>
                <h2 class="exam-selection-title">Select your exam to view flashcards</h2>
            </div>
            <div class="exam-selection-body">
                <div class="exam-search-container">
                    <i class="bi bi-search exam-search-icon"></i>
                    <input type="text" class="exam-search-input" placeholder="Enter your exam" id="examSearchInput">
                </div>
                <div class="popular-exams-section">
                    <div class="popular-exams-header">
                        <i class="bi bi-graph-up-arrow"></i>
                        <span class="popular-exams-title">Popular exams</span>
                    </div>
                    <div class="popular-exams-list">
                        <div class="exam-item" data-exam="IELTS Academic">
                            <div class="exam-item-info">
                                <div class="exam-acronym">IELTS Academic</div>
                                <div class="exam-full-name">Exam Prep for IELTS® Academic</div>
                            </div>
                            <button class="exam-add-btn" onclick="addExam('IELTS Academic', event);">
                                <i class="bi bi-plus"></i>
                            </button>
                        </div>
                        <div class="exam-item" data-exam="SAT">
                            <div class="exam-item-info">
                                <div class="exam-acronym">SAT</div>
                                <div class="exam-full-name">Scholastic Assessment Test</div>
                            </div>
                            <button class="exam-add-btn" onclick="addExam('SAT', event);">
                                <i class="bi bi-plus"></i>
                            </button>
                        </div>
                        <div class="exam-item" data-exam="JEE Main">
                            <div class="exam-item-info">
                                <div class="exam-acronym">JEE Main</div>
                                <div class="exam-full-name">Joint Entrance Examination - Main</div>
                            </div>
                            <button class="exam-add-btn" onclick="addExam('JEE Main', event);">
                                <i class="bi bi-plus"></i>
                            </button>
                        </div>
                        <div class="exam-item" data-exam="ENEM">
                            <div class="exam-item-info">
                                <div class="exam-acronym">ENEM</div>
                                <div class="exam-full-name">Exame Nacional do Ensino Médio</div>
                            </div>
                            <button class="exam-add-btn" onclick="addExam('ENEM', event);">
                                <i class="bi bi-plus"></i>
                            </button>
                        </div>
                    </div>
                </div>
            </div>
            <div class="exam-selection-footer">
                <button class="exam-continue-btn" id="examContinueBtn" onclick="continueWithExam()"
                    disabled>Continue</button>
            </div>
        </div>
    </div>

    <!-- New Folder Modal -->
    <div class="new-folder-modal" id="newFolderModal" style="display: none;">
        <div class="new-folder-modal-overlay" onclick="hideNewFolderModal()"></div>
        <div class="new-folder-modal-content">
            <div class="new-folder-icon">
                <i class="bi bi-folder"></i>
            </div>
            <input type="text" class="new-folder-input" id="newFolderInput" placeholder="Name your folder"
                autocomplete="off">
            <div class="new-folder-buttons">
                <button class="new-folder-btn new-folder-btn-cancel" onclick="hideNewFolderModal()">Cancel</button>
                <button class="new-folder-btn new-folder-btn-create" id="newFolderCreateBtn" onclick="createNewFolder()"
                    disabled>Create</button>
            </div>
        </div>
    </div>

    <!-- Bootstrap JS -->
    <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/js/bootstrap.bundle.min.js"></script>
    <!-- Translations JS -->
    <script src="../../../style/translations.js"></script>
    <!-- Theme JS -->
    <script src="../../../style/theme.js"></script>
    <!-- Modal JS -->
    <script src="../../../style/modal.js"></script>
    <!-- Dashboard JS -->
    <script src="../../../style/dashboard.js"></script>
    <script>
        // Exam Selection Modal Functions
        let selectedExam = null;

        function showExamSelectionModal() {
            const modal = document.getElementById('examSelectionModal');
            if (modal) {
                modal.style.display = 'flex';
                document.body.style.overflow = 'hidden';
            }
        }

        function hideExamSelectionModal() {
            const modal = document.getElementById('examSelectionModal');
            if (modal) {
                modal.style.display = 'none';
                document.body.style.overflow = '';
                // Reset selection
                selectedExam = null;
                updateContinueButton();
                const searchInput = document.getElementById('examSearchInput');
                if (searchInput) {
                    searchInput.value = '';
                }
                // Remove selected class from all items
                document.querySelectorAll('.exam-item').forEach(item => {
                    item.classList.remove('selected');
                });
            }
        }

        function addExam(examName, e) {
            if (e) {
                e.preventDefault();
                e.stopPropagation();
            }

            // Toggle selection
            const examItems = document.querySelectorAll('.exam-item');
            examItems.forEach(item => {
                if (item.dataset.exam === examName) {
                    if (item.classList.contains('selected')) {
                        item.classList.remove('selected');
                        selectedExam = null;
                    } else {
                        // Remove selection from other items
                        examItems.forEach(i => i.classList.remove('selected'));
                        item.classList.add('selected');
                        selectedExam = examName;
                    }
                }
            });
            updateContinueButton();
        }

        // Make functions globally accessible
        window.showExamSelectionModal = showExamSelectionModal;
        window.hideExamSelectionModal = hideExamSelectionModal;
        window.addExam = addExam;
        window.updateContinueButton = updateContinueButton;
        window.continueWithExam = continueWithExam;

        function updateContinueButton() {
            const continueBtn = document.getElementById('examContinueBtn');
            if (continueBtn) {
                if (selectedExam) {
                    continueBtn.disabled = false;
                } else {
                    continueBtn.disabled = true;
                }
            }
        }

        function continueWithExam() {
            if (selectedExam) {
                // Save the selected exam as a folder
                saveExamAsFolder(selectedExam);
                // Close modal
                hideExamSelectionModal();
                // Reload folders in sidebar
                if (typeof loadFoldersInSidebar === 'function') {
                    loadFoldersInSidebar();
                }
                // Reload library folders if on library page
                if (typeof loadLibraryFolders === 'function') {
                    loadLibraryFolders();
                }
            }
        }

        function saveExamAsFolder(examName) {
            // Get existing folders from localStorage
            const folders = JSON.parse(localStorage.getItem('folders') || '[]');

            // Get full name for the exam
            const fullName = getExamFullName(examName);

            // Check if folder already exists
            const folderExists = folders.some(folder => folder.name === fullName || folder.name === examName);

            if (!folderExists) {
                // Create folder object (same structure as regular folders)
                const newFolder = {
                    id: 'folder-' + Date.now(),
                    name: fullName,
                    createdAt: new Date().toISOString(),
                    pinned: true,
                    isExam: true,
                    examName: examName
                };

                // Add to folders array
                folders.push(newFolder);

                // Save to localStorage
                localStorage.setItem('folders', JSON.stringify(folders));
            }
        }

        function getExamFullName(examName) {
            const examNames = {
                'IELTS Academic': 'Exam Prep for IELTS® Academic',
                'SAT': 'Scholastic Assessment Test',
                'JEE Main': 'Joint Entrance Examination - Main',
                'ENEM': 'Exame Nacional do Ensino Médio'
            };
            return examNames[examName] || examName;
        }

        // Search functionality
        document.addEventListener('DOMContentLoaded', function () {
            const searchInput = document.getElementById('examSearchInput');
            if (searchInput) {
                searchInput.addEventListener('input', function (e) {
                    const query = e.target.value.toLowerCase();
                    const examItems = document.querySelectorAll('.exam-item');
                    examItems.forEach(item => {
                        const examName = item.dataset.exam.toLowerCase();
                        const fullName = item.querySelector('.exam-full-name').textContent.toLowerCase();
                        if (examName.includes(query) || fullName.includes(query)) {
                            item.style.display = 'flex';
                        } else {
                            item.style.display = 'none';
                        }
                    });
                });
            }

            // Close modal on Escape key
            document.addEventListener('keydown', function (e) {
                if (e.key === 'Escape') {
                    const modal = document.getElementById('examSelectionModal');
                    if (modal && modal.style.display === 'flex') {
                        hideExamSelectionModal();
                    }
                }
            });

            // Add click handlers to exam items (clicking anywhere on the item)
            setTimeout(function () {
                document.querySelectorAll('.exam-item').forEach(item => {
                    item.addEventListener('click', function (e) {
                        // Don't trigger if clicking the button itself (it will handle its own click)
                        if (!e.target.closest('.exam-add-btn')) {
                            const examName = this.dataset.exam;
                            addExam(examName, e);
                        }
                    });
                });
            }, 100);
        });
    </script>
</body>

</html>